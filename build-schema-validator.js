'use strict'

const Ajv = require('ajv').default
const schema = require('ajv/dist/refs/json-schema-draft-07.json')
const standalone = require('ajv/dist/standalone').default

const { basename, join } = require('path')
const { writeFileSync } = require('fs')

// *************************

const ajv = new Ajv({ code: { source: true } })
const validator = ajv.compile(schema)
const moduleCode = `/* CODE GENERATED BY '${basename(__filename)}' DO NOT EDIT! */\n${standalone(ajv, validator)}`

writeFileSync(join(__dirname, 'schema-validator.js'), moduleCode)
